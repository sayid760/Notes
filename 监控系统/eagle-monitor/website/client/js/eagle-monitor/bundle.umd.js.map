{"version":3,"file":"bundle.umd.js","sources":["../../../../eagle-sdk/errorCatch.js","../../../../eagle-sdk/index.js"],"sourcesContent":["\r\nlet formatError = (errorObj)=>{\r\n  let col = errorObj.column || errorObj.columnNumber;\r\n  let row = errorObj.line || errorObj.lineNumber;\r\n  let errorType = errorObj.name;\r\n  let message = errorObj.message;\r\n\r\n  let {stack} = errorObj;\r\n  if (stack) {\r\n    let matchUrl = stack.match(/(https|http)?:\\/\\/[^\\n]+/);\r\n    let urlFirstStack = matchUrl ? matchUrl[0]: '';\r\n    let regUrlCheck = /(https|http)?:\\/\\/(\\S)*\\.js/;\r\n\r\n    // 获取真正的URL\r\n    let resourceUrl = '';\r\n    if (regUrlCheck.test(urlFirstStack)) {\r\n      resourceUrl = urlFirstStack.match(regUrlCheck)[0];\r\n    }\r\n\r\n    // 获取真正的行信息\r\n    let stackCol = null;\r\n    let stackRow = null;\r\n    let posStack = urlFirstStack.match(/:(\\d+):(\\d+)/);\r\n\r\n    if (posStack && posStack.length >= 3) {\r\n      [, stackCol, stackRow] = posStack;\r\n    }\r\n\r\n    return {\r\n      content: stack,\r\n      col: Number(col || stackCol),\r\n      row: Number(row || stackRow),\r\n      errorType, message, resourceUrl\r\n    }\r\n  }\r\n}\r\n\r\nexport default {\r\n    init: (cb)=>{\r\n      let _origin_error = window.onerror;\r\n      window.onerror = function(message, source, lineno, colno, error) {\r\n\r\n        let errorInfo = formatError(error);\r\n        errorInfo.type = 'error';\r\n        errorInfo._message = message;\r\n        errorInfo._source = source;\r\n        errorInfo._lineno = lineno;\r\n        errorInfo._colno = colno;\r\n        cb(errorInfo)\r\n        _origin_error && _origin_error.apply(window, arguments);\r\n      }\r\n    }\r\n}","// import perf from './perf.js'\r\n// import resource from './resource.js'\r\n// import xhrHook from './xhrHook.js'\r\nimport errorCatch from './errorCatch.js'\r\n\r\n\r\n// perf.init((perform)=>{\r\n//     console.log('perf init', perform);\r\n// })\r\n\r\n// resource.init((resourceData) => {\r\n//     console.log('resource init', resourceData);\r\n// })\r\n\r\n// xhrHook.init((xhrInfo) => {\r\n//     console.log('xhrInfo init', xhrInfo);\r\n// })\r\n\r\nerrorCatch.init((errObj) => {\r\n  console.log('errorCatch init', errObj);\r\n})"],"names":[],"mappings":";;;;;EACA,IAAI,WAAW,GAAG,CAAC,QAAQ,GAAG;EAC9B,EAAE,IAAI,GAAG,GAAG,QAAQ,CAAC,MAAM,IAAI,QAAQ,CAAC,YAAY,CAAC;EACrD,EAAE,IAAI,GAAG,GAAG,QAAQ,CAAC,IAAI,IAAI,QAAQ,CAAC,UAAU,CAAC;EACjD,EAAE,IAAI,SAAS,GAAG,QAAQ,CAAC,IAAI,CAAC;EAChC,EAAE,IAAI,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAC;;EAEjC,EAAE,IAAI,CAAC,KAAK,CAAC,GAAG,QAAQ,CAAC;EACzB,EAAE,IAAI,KAAK,EAAE;EACb,IAAI,IAAI,QAAQ,GAAG,KAAK,CAAC,KAAK,CAAC,0BAA0B,CAAC,CAAC;EAC3D,IAAI,IAAI,aAAa,GAAG,QAAQ,GAAG,QAAQ,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;EACnD,IAAI,IAAI,WAAW,GAAG,6BAA6B,CAAC;;EAEpD;EACA,IAAI,IAAI,WAAW,GAAG,EAAE,CAAC;EACzB,IAAI,IAAI,WAAW,CAAC,IAAI,CAAC,aAAa,CAAC,EAAE;EACzC,MAAM,WAAW,GAAG,aAAa,CAAC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAC,CAAC,CAAC;EACxD,KAAK;;EAEL;EACA,IAAI,IAAI,QAAQ,GAAG,IAAI,CAAC;EACxB,IAAI,IAAI,QAAQ,GAAG,IAAI,CAAC;EACxB,IAAI,IAAI,QAAQ,GAAG,aAAa,CAAC,KAAK,CAAC,cAAc,CAAC,CAAC;;EAEvD,IAAI,IAAI,QAAQ,IAAI,QAAQ,CAAC,MAAM,IAAI,CAAC,EAAE;EAC1C,MAAM,GAAG,QAAQ,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAC;EACxC,KAAK;;EAEL,IAAI,OAAO;EACX,MAAM,OAAO,EAAE,KAAK;EACpB,MAAM,GAAG,EAAE,MAAM,CAAC,GAAG,IAAI,QAAQ,CAAC;EAClC,MAAM,GAAG,EAAE,MAAM,CAAC,GAAG,IAAI,QAAQ,CAAC;EAClC,MAAM,SAAS,EAAE,OAAO,EAAE,WAAW;EACrC,KAAK;EACL,GAAG;EACH,EAAC;;AAED,mBAAe;EACf,IAAI,IAAI,EAAE,CAAC,EAAE,GAAG;EAChB,MAAM,IAAI,aAAa,GAAG,MAAM,CAAC,OAAO,CAAC;EACzC,MAAM,MAAM,CAAC,OAAO,GAAG,SAAS,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,KAAK,EAAE,KAAK,EAAE;;EAEvE,QAAQ,IAAI,SAAS,GAAG,WAAW,CAAC,KAAK,CAAC,CAAC;EAC3C,QAAQ,SAAS,CAAC,IAAI,GAAG,OAAO,CAAC;EACjC,QAAQ,SAAS,CAAC,QAAQ,GAAG,OAAO,CAAC;EACrC,QAAQ,SAAS,CAAC,OAAO,GAAG,MAAM,CAAC;EACnC,QAAQ,SAAS,CAAC,OAAO,GAAG,MAAM,CAAC;EACnC,QAAQ,SAAS,CAAC,MAAM,GAAG,KAAK,CAAC;EACjC,QAAQ,EAAE,CAAC,SAAS,EAAC;EACrB,QAAQ,aAAa,IAAI,aAAa,CAAC,KAAK,CAAC,MAAM,EAAE,SAAS,CAAC,CAAC;EAChE,QAAO;EACP,KAAK;EACL;;ECpDA;AACA,AAGA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;;EAEA;EACA;EACA;;EAEA,UAAU,CAAC,IAAI,CAAC,CAAC,MAAM,KAAK;EAC5B,EAAE,OAAO,CAAC,GAAG,CAAC,iBAAiB,EAAE,MAAM,CAAC,CAAC;EACzC,CAAC;;;;"}